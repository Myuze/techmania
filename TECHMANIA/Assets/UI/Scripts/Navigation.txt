function SetUpNavigation(tm)
    tm.root.Q("main-menu").Q("start-button").RegisterCallback("Click", function()
        TransitionPanelFromRight(
            tm,
            tm.root.Q("main-menu"),
            tm.root.Q("select-track-panel")
        )
        ShowSelectTrackPanel(tm)
    end)
    tm.root.Q("select-track-panel").Q("back-button").RegisterCallback("Click", function()
        TransitionPanelFromLeft(
            tm,
            tm.root.Q("select-track-panel"),
            tm.root.Q("main-menu")
        )
    end)
    -- select track panel --> select pattern panel is registered on track cards,
    -- handled by Select Track Panel.txt
    tm.root.Q("select-pattern-panel").Q("back-button").RegisterCallback("Click", function()
        TransitionPanelFromLeft(
            tm,
            tm.root.Q("select-pattern-panel"),
            tm.root.Q("select-track-panel")
        )
        StopPreviewTrackPlayback(tm)
    end)
    tm.root.Q("select-pattern-panel").Q("play-button").RegisterCallback("Click", function()
        FadeOutThenInToPanel(
            tm,
            tm.root.Q("select-pattern-panel"),
            tm.root.Q("game-panel")
        )
        StopPreviewTrackPlayback(tm)
    end)
    tm.root.Q("main-menu").Q("options-button").RegisterCallback("Click", function()
        TransitionPanelFromRight(
            tm,
            tm.root.Q("main-menu"),
            tm.root.Q("options-panel")
        )
        ShowOptionsPanel(tm)
    end)
    tm.root.Q("options-panel").Q("back-button").RegisterCallback("Click", function()
        TransitionPanelFromLeft(
            tm,
            tm.root.Q("options-panel"),
            tm.root.Q("main-menu")
        )
        tm.options.SaveToFile()
    end)
    tm.root.Q("main-menu").Q("information-button").RegisterCallback("Click", function()
        TransitionPanelFromRight(
            tm,
            tm.root.Q("main-menu"),
            tm.root.Q("information-panel")
        )
    end)
    tm.root.Q("information-panel").Q("back-button").RegisterCallback("Click", function()
        TransitionPanelFromLeft(
            tm,
            tm.root.Q("information-panel"),
            tm.root.Q("main-menu")
        )
    end)
    tm.root.Q("main-menu").Q("quit-button").RegisterCallback("Click", function()
        tm.Quit()
    end)
end

function SelectTrackToSelectPatternPanel(tm)
    TransitionPanelFromRight(
        tm,
        tm.root.Q("select-track-panel"),
        tm.root.Q("select-pattern-panel"),
        function()
            -- This has to be called 1 frame after select-pattern-panel
            -- displays so the radar can be initialized properly.
            InitializeRadar(tm)
            -- This has to be called after select-pattern-panel displays
            -- so the load audio callback can check whether the panel
            -- displays to decide whether to play the audio.
            StartPreviewTrackPlayback(tm)
        end
    )
    ShowSelectPatternPanel(tm)
end

function GamePanelToSelectTrackPanel(tm)
    FadeOutThenInToPanel(
        tm,
        tm.root.Q("game-panel"),
        tm.root.Q("select-track-panel")
    )
    ShowSelectTrackPanel(tm)
end