tm = getApi(1)
root = tm.rootVisualElement
audio = tm.audio

tm.ExecuteScript("Assets/UI/Controls/Controls.txt")
InitializeControls(root, audio)

welcomeMat = root.Q("welcome-mat")
welcomeMat.RegisterCallback(eventType.Click, function ()
    print("clicked on mat")
    welcomeMat.SetVisibility(false)
    root.Q("main-menu").Q("buttons").SetVisibility(true)
end)

SetProgressBar(root.Q("test-progress-bar"), 10)

function Vector3(x, y, z)
    return vector3.__new(x, y, z)
end
root.Q("button-text").RegisterCallback(eventType.Click, function (button)
    tm.StartCoroutine(function ()
        local timeElapsed = 0
        while (timeElapsed < 5) do
            timeElapsed = timeElapsed + time.deltaTime
            button.transform.position = Vector3(timeElapsed * 100, 0, 0)
            coroutine.yield()
        end
    end)
end)

-- Query example
-- root.Query().ForEach(function(e)
--     if (e.IsTextElement()) then
--         print(e.text)
--     end
-- end)

-- Audio example
-- root.Q("test-button").OnClick(function(button)
--     print("button clicked: " .. button.name)
--     audio.Play("Assets/UI/SFX/Click.wav", audio.sfxChannel)
-- end)

-- Vector3 example
-- v = Vector3(1, 2, 3)
-- print(v.y)

-- Coroutine example
-- tm.StartCoroutine(function ()
--     for i = 1, 100 do
--         print("Current frame: " .. time.frameCount)
--         coroutine.yield()
--     end
-- end)