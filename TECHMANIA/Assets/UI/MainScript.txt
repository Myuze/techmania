tm = getApi(1)

l10n = tm.l10n
l10n.Initialize(tm.LoadTextFile("Assets/UI/String Table.csv"))
l10n.ApplyLocale(tm.options.locale)

tm.ExecuteScript("Assets/UI/Controls/Controls.txt")
InitializeControls(tm)

tm.ExecuteScript("Assets/UI/Scripts/Alert Box.txt")
tm.ExecuteScript("Assets/UI/Scripts/Main Menu/Welcome Mat.txt")
tm.ExecuteScript("Assets/UI/Scripts/Main Menu/Options Panel.txt")
tm.ExecuteScript("Assets/UI/Scripts/Main Menu/Information Panel.txt")
tm.root.Q("main-menu").Q("options-button").RegisterCallback("Click", function()
    TransitionPanelFromRight(
        tm.root.Q("main-menu"),
        tm.root.Q("options-panel")
    )
    ShowOptionsPanel(tm)
end)
tm.root.Q("options-panel").Q("back-button").RegisterCallback("Click", function()
    TransitionPanelFromLeft(
        tm.root.Q("options-panel"),
        tm.root.Q("main-menu")
    )
    tm.options.SaveToFile()
end)
tm.root.Q("main-menu").Q("information-button").RegisterCallback("Click", function()
    TransitionPanelFromRight(
        tm.root.Q("main-menu"),
        tm.root.Q("information-panel")
    )
end)
tm.root.Q("information-panel").Q("back-button").RegisterCallback("Click", function()
    TransitionPanelFromLeft(
        tm.root.Q("information-panel"),
        tm.root.Q("main-menu")
    )
end)
tm.root.Q("main-menu").Q("quit-button").RegisterCallback("Click", function()
    tm.Quit()
end)

function Vector3(x, y, z)
    return vector3.__new(x, y, z)
end

-- Query example
-- root.Query().ForEach(function(e)
--     if (e.IsTextElement()) then
--         print(e.text)
--     end
-- end)

-- Audio example
-- root.Q("test-button").OnClick(function(button)
--     print("button clicked: " .. button.name)
--     audio.Play("Assets/UI/SFX/Click.wav", "SFX")
-- end)

-- Vector3 example
-- v = Vector3(1, 2, 3)
-- print(v.y)

-- Coroutine example
-- tm.StartCoroutine(function ()
--     for i = 1, 100 do
--         print("Current frame: " .. time.frameCount)
--         coroutine.yield()
--     end
-- end)

-- Animation example
-- root.Q("button-text").RegisterCallback(eventType.Click, function (button)
--     tm.StartCoroutine(function ()
--         local timeElapsed = 0
--         while (timeElapsed < 5) do
--             timeElapsed = timeElapsed + time.deltaTime
--             button.transform.position = Vector3(timeElapsed * 100, 0, 0)
--             coroutine.yield()
--         end
--     end)
-- end)